<!DOCTYPE html>
<html>
<head>
  <title>Javascript voor games - P5.js</title>
  <!-- <link rel="stylesheet" type="text/css" href="css/style.css"> -->
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <!--
  <nav class="topnav" id="myTopnav">
    <a href="#les0">Les 0 - Setup</a>
    <a href="#les1">Les 1 - Je eerste tekening</a>
    <a href="#les2">Les 2 - Animaties</a>
    <a href="#les3">Les 3 - Border detection</a>
    <a href="#les3">Les 4 - Meerdere objecten, wat nu?</a>

  </nav>
  -->
</head>

<body>
<!-- scripts al laden buiten de xmp tag-->
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
<xmp theme="journal" style="display:none;">
<a name="les0"></a>
## Les 0 - Introductie en setup

P5.js is een bibliotheek (library) met functionaliteit waarmee je snel en eenvoudig tekeningen en animaties kunt maken voor het web. Misschien heb je wel gehoord van Processing.js maar dat is eigenlijk een voorloper van P5.js. De taal die je voor P5.js gebruikt is gewoon javascript. Bij Processing is de basistaal Java.

Wat het zo fijn maakt is dat je met simpele commando's figuren kunt tekenen. Zo kun je een rechthoek tekenen als volgt:

~~~javascript
rect(20, 30, 40, 20); //Rechthoek op positie (20, 30), 40 pixels breed en 20 pixels hoog.
~~~

### Canvas
Net als bij het schilderen teken je op een canvas, een deel van je browserwindow. Je kunt zelf bepalen hoe groot of hoe klein het canvas is maar alles wat je tekent moet op het canvas komen anders zie je het niet (maar het is er wel).

Zoals je gewend bent zit het punt (0, 0) helemaal linksboven op je canvas. Alle afmetingen die gaat gebruiken zijn in pixels.


### Draw loop en setup
De basis van je tekening of animatie is altijd de draw loop. De code in deze loop blijft achter elkaar uitgevoerd worden. Een eerste voorbeeldprogramma is als volgt:

<!--
~~~javascript
var breedte;
var hoogte;
var xpos;
var ypos;

function setup(){
  breedte = 100;
  hoogte = 50;
  xpos = 0;
  ypos = 0;
}

function draw(){
  rect(xpos, ypos, breedte, hoogte);
}
~~~
-->

<p data-height="350" data-theme-id="light" data-slug-hash="gGPMLY" data-default-tab="js,result" data-user="jurjenh" data-embed-version="2" data-pen-title="gGPMLY" class="codepen">See the Pen <a href="https://codepen.io/jurjenh/pen/gGPMLY/">gGPMLY</a> by Jurjenh (<a href="https://codepen.io/jurjenh">@jurjenh</a>) on <a href="https://codepen.io">CodePen</a>.</p>

Dit programma tekent een rechtoek en blijft dat 60 keer per seconde doen. De framerate is namelijk 60 fps (frames per second). Wat je dus zult zien is een rechthoek en meer niet.
Wil je dat de code één keer wordt uitgevoerd of stopt met herhalen dan gebruik je:

    noLoop();

Je ziet ook de setupfunctie. Deze functie wordt één keer uitgevoerd aan het begin van je programma.

### Laten we beginnen!
Je vingers jeuken natuurlijk al en je wilt meteen aan de slag. Wat we nodig hebben is het volgende:

* Editor (bijvoorbeeld Atom)
* Een webserver
* Ehm, verder niets

Je kunt uiteindelijk je programma wel op een server zetten die met het internet verbonden is, maar we beginnen met een webserver die alleen op je eigen computer draait. Met Python kun je eenvoudig een webserver aanzetten. (Ik ga ervan uit dat je python hebt geinstalleerd).

* Open een terminal of een Powershell
* Maak een map aan waarin je aan je project gaat werken en ga die map in (met cd)
* Typ het onderstaande commando in:

~~~
python3 -m http.server
~~~

Ga nu naar de volgende url adres in je browser:

~~~
127.0.0.7:8000
~~~

Als het goed is zie je een lijst met bestanden die in die map staat. Sla hier straks je html en javascript bestand in op.
<a name="les1"></a>
## Les 1 - Je eerste tekening

Je gaat nu je eerste tekening maken. Gebruik zo veel mogelijk variabelen om de verschillende lengtes aan te geven. Je zult merken dat je tekening dan veel sneller te veranderen is zonder dat je moet gaan zoeken waar welk getal ook alweer voor staat.

Een aantal belangrijke figuren zijn ellipsen, rechthoeken en lijnen. Je kunt ze vullen met een bepaalde kleur of de rand uitzetten of van kleur veranderen. Kijk maar eens naar het voorbeeld hieronder.
<p data-height="490" data-theme-id="light" data-slug-hash="boEgrp" data-default-tab="js,result" data-user="jurjenh" data-embed-version="2" data-pen-title="boEgrp" class="codepen">See the Pen <a href="https://codepen.io/jurjenh/pen/boEgrp/">boEgrp</a> by Jurjenh (<a href="https://codepen.io/jurjenh">@jurjenh</a>) on <a href="https://codepen.io">CodePen</a>.</p>

Zoals je ziet zijn al die getallen wel onoverzichtelijk. Wat als we nu iets willen veranderen? Laten we hetzelfde voorbeeld nu eens maken met behulp van variabelen.

<p data-height="591" data-theme-id="light" data-slug-hash="BwjpML" data-default-tab="js,result" data-user="jurjenh" data-embed-version="2" data-pen-title="BwjpML" class="codepen">See the Pen <a href="https://codepen.io/jurjenh/pen/BwjpML/">BwjpML</a> by Jurjenh (<a href="https://codepen.io/jurjenh">@jurjenh</a>) on <a href="https://codepen.io">CodePen</a>.</p>

Dat ziet er al beter uit. Natuurlijk kunnen we ook nog een variabele toevoegen voor bepaalde kleuren of de hoogte van de wielen en meer. We gaan dat nu niet doen.

Ga nu zelf een tekening maken. Je hebt hiervoor een html pagina nodig met het volgende erin:

~~~html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.14/p5.js"></script>
    <script src="tekening.js"></script> <!-- dit javascriptbestand bevat je tekening -->
  </head>
  <body>
  </body>
</html>
~~~

Zet dit bestand en je tekening in de map waar je de webserver hebt opgestart.

Als je wilt weten wat je nog meer kunt gebruiken kijk dan op [https://p5js.org/reference/](https://p5js.org/reference/).
<a name="les3"></a>
## Les 2 - Animaties
Als je variabalen hebt gebruikt zoals in het voorbeeld is het eenvoudig om er een animatie van te maken! We voegen nu namelijk één regel code toe. Deze regel code verhoogt xCar met 1, iedere keer dat de draw loop doorlopen wordt. Zo wordt er steeds een nieuwe auto getekend. Alleen jammer dat de oude auto ook blijft staan.

<p data-height="599" data-theme-id="light" data-slug-hash="qPbrbe" data-default-tab="js,result" data-user="jurjenh" data-embed-version="2" data-pen-title="qPbrbe" class="codepen">See the Pen <a href="https://codepen.io/jurjenh/pen/qPbrbe/">qPbrbe</a> by Jurjenh (<a href="https://codepen.io/jurjenh">@jurjenh</a>) on <a href="https://codepen.io">CodePen</a>.</p>

Wat gebeurt er nou? Elke keer wordt in de draw loop alles getekend over de tekening die er al stond. Als we dus een nieuwe auto willen zullen we de achtergrond steeds opnieuw moeten tekenen. Bovendien rijdt de auto uit het scherm. Dat gaan we later oplossen.

Nu we steeds meer code gaat toevoegen is het handig om een functie te maken voor onze auto. We voeren wat wijzigingen door en krijgen dan het volgende voorbeeld. Een rijdende auto!

<p data-height="676" data-theme-id="light" data-slug-hash="KXVWNR" data-default-tab="js,result" data-user="jurjenh" data-embed-version="2" data-pen-title="KXVWNR" class="codepen">See the Pen <a href="https://codepen.io/jurjenh/pen/KXVWNR/">KXVWNR</a> by Jurjenh (<a href="https://codepen.io/jurjenh">@jurjenh</a>) on <a href="https://codepen.io">CodePen</a>.</p>

Ga nu een animatie maken met je eigen tekening.

<a name="les4"></a>
## Les 3 - Border detection
Het is wel jammer dat de auto wegrijdt. Kunnen we hem niet laten omkeren? Jazeker!
</xmp>

<script src="http://strapdownjs.com/v/0.2/strapdown.js"></script>
</body>
</html>
